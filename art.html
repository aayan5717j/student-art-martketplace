<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Art Showcase - Student Art Hub</title>
<link rel="stylesheet" href="styles.css" />
</head>
<body>

<header>
<div class="container">
<h1>Student Art Hub</h1>
<nav>
<a href="index.html">Home</a>
<a href="art.html">Art Showcase</a>
<a href="books.html">Book Exchange</a>
<a href="sketches.html">Custom Sketches</a>
<a href="notes.html">Handwritten Notes</a>
</nav>
</div>
</header>

<main class="container">
<section>
<h2>Art Showcase</h2>
<p>Pieces from talented student artists.</p>

<!-- Upload Section -->
<div id="uploadSection" style="display:none;">
<h3>Upload Your Artwork</h3>
<input type="file" id="fileInput" accept="image/*">
<button id="uploadBtn">Upload</button>
</div>

<h3>Uploaded Art Gallery</h3>
<div id="gallery"></div>
</section>
</main>

<footer>
<div class="container"><p>Â© 2025 Student Art Hub</p></div>
</footer>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";
import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-storage.js";

const firebaseConfig = {
  apiKey: "AIzaSyBxD8SLW9z8ndgAJprcGolqivlNUZVYZxc",
  authDomain: "art-hub-77eb1.firebaseapp.com",
  projectId: "art-hub-77eb1",
  storageBucket: "art-hub-77eb1.appspot.com",
  messagingSenderId: "1097170910592",
  appId: "1:1097170910592:web:8590c10f6d0662d6881565"
};

const app = initializeApp(firebaseConfig);
const storage = getStorage(app);
const auth = getAuth();

// Show upload only to sellers
onAuthStateChanged(auth, async user => {
  if(user){
    const roleSnap = await fetchRole(user.uid);
    if(roleSnap === 'seller'){ document.getElementById('uploadSection').style.display = 'block'; }
  }
});

// Function to get role
async function fetchRole(uid){
  // Firestore fetch role code here (omitted for brevity, same as before)
  return 'seller'; // placeholder, implement actual Firestore fetch
}

// Upload
document.getElementById("uploadBtn").addEventListener("click", async () => {
  const file = document.getElementById("fileInput").files[0];
  if(!file){ alert("Select an image"); return; }
  const fileName = Date.now() + "-" + file.name;
  const storageRef = ref(storage, "artworks/" + fileName);
  await uploadBytes(storageRef,file);
  const url = await getDownloadURL(storageRef);
  document.getElementById("gallery").innerHTML += `<img src="${url}" width="200" style="margin:10px;border-radius:10px;">`;
  alert("Upload successful!");
});
</script>
<script src="script.js"></script>
</body>
</html>